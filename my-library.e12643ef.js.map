{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-a73f6b30b79987a5.js","src/js/spinner.js","src/js/requester-api.js","src/js/render.js","node_modules/@parcel/runtime-js/lib/runtime-7e0671ab3855cfae.js","src/js/theme-lite-dark.js","src/js/team-modal.js","src/my-library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1B9dp\\\":\\\"my-library.e12643ef.js\\\",\\\"iXtly\\\":\\\"noposter.9c466f47.jpg\\\"}\"));","let overlay = document.querySelector('.overlay');\n\n\nexport function spinner() {\n    window.addEventListener('load', () => {\n        overlay.classList.add('is-open');\n        setTimeout(() => {\n          overlay.remove();\n        }, 600);\n      });  \n}\n\n","import {spinner} from'./spinner.js'\n\nconst API_KEY = '1e7c9642f723687d0411097a32c8e17f';\n\nexport function requesterApi(requst = '', numOfPage = 1) {\n    spinner();\n    let ref = `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=${numOfPage}&language=en-US`;\n    if (requst) {\n        ref = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${requst}&page=${numOfPage}&language=en-US`\n    };\n\n    return fetch(ref)\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(response.status);\n                }\n                return response.json();\n            })\n            .then(response => {\n                return response;\n            })\n            .catch(error => console.log(error));\n            \n};\n\nexport function requesterApiByID(id) {\n    return fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&language=en-US`)\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(response.status);\n                }\n                return response.json();\n            })\n            .then(response => {\n                return response;\n            })\n            .catch(error => console.log(error));\n};\n\nexport function requesterApiGenres() {\n    fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}&language=en-US`)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n        .then(response => {\n            localStorage.setItem(`genresList`, JSON.stringify(response.genres));\n        })\n        .catch(error => console.log(error));\n};","import imgHolder from '../images/noposter.jpg'\n\nexport function renderHomeCards(array) {\n    document.querySelector('.list')\n        .innerHTML = array.reduce((acc, { id, poster_path, title, release_date, genre_ids }) => {\n            poster_path = testPath(poster_path)\n            title = testTile(title)\n            const currentGenres = genresGen(genre_ids);\n            return acc + `<li class=\"item\" id=\"${id}\">\n                            <div class=\"photo__wrapper\">\n                                <a class=\"img__link\" href=\"#\">\n                                    <img class=\"img\" src=\"${poster_path}\" alt=\"\" width=\"395\">\n                                </a>\n                            </div>\n                            <div class=\"data__content\">\n                                <h2 class=\"title\">${title}</h2>\n                                <p class=\"text\">${currentGenres.join(', ')} ${currentGenres[0] && release_date ? '|' : ''} \n                                ${release_date ? `${release_date.slice(0, 4)}` : ''}</p>\n                            </div>\n                        </li>`\n    }, '');\n};\n\nexport function renderLibraryCards(array) {\n    document.querySelector('.list')\n        .innerHTML = array.reduce((acc, { id, poster_path, name, title, vote_average, release_date, genre_ids }) => {\n            poster_path = testPath(poster_path)\n            title = testTile(title)\n            const currentGenres = genresGen(genre_ids);\n            return acc + `<li class=\"item\" id=\"${id}\">\n                            <div class=\"photo__wrapper\">\n                                <a class=\"img__link\" href=\"#\">\n                                    <img class=\"img\" src=\"${poster_path}\" alt=\"\" width=\"395\">\n                                </a>\n                            </div>\n                            <div class=\"data__content\">\n                                <h2 class=\"title\">${name ? name : title}</h2>\n                                <p class=\"text\">${currentGenres.join(', ')} ${currentGenres[0] && release_date ? '|' : ''} \n                                ${release_date ? `${release_date.slice(0, 4)}` : ''} ${vote_average.toFixed(1)}</p>\n                            </div>\n                        </li>`\n    }, '');\n};\n\nexport function renderModal({ id, genres, poster_path, title, original_title, vote_average, vote_count, popularity, overview}) {\n    const currentGenres = [];\n    genres.forEach(elem => currentGenres.push(elem.name));\n    document.querySelector('.list')\n        .innerHTML = `<div id=\"${id}\">\n                        <img class=\"card-img\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\">\n                        <h2 class=\"card-header\">${title}</h2>\n                        <div class=\"card-stats\">\n                            <p>Vote / Votes</p>\n                            <p>Popularyty</p>\n                            <p>Original Title</p>\n                            <p>Genre</p>\n                        </div>\n                        <div class=\"card-stats-values\">\n                            <p><span>${vote_average.toFixed(1)}</span> / ${vote_count}</p>\n                            <p>${popularity.toFixed(1)}</p>\n                            <p>${original_title}</p>\n                            <p>${currentGenres.join(', ')}</p>\n                        </div>\n                        <p class=\"card-about\">About</p>\n                        <p class=\"card-description\">${overview}</p>\n                        <button class=\"card-watched-btn\">add to watched</button>\n                        <button class=\"card-ueue-btn\">add to queue</button>\n                    </div>`;\n};\n\nexport function renderWatchedOrQueue({ id, genres, poster_path, title, release_date, vote_average}) {\n    const currentGenres = [];\n    JSON.parse(localStorage.getItem(`genresList`))\n        .forEach(ganre => {\n            genres.forEach(elem => {\n                if (ganre.id === elem.id) {\n                    currentGenres.push(elem.name);\n                };\n            });\n        });\n    const data = `<li class=\"item\" id=\"${id}\">\n                    <div class=\"photo__wrapper\">\n                        <a class=\"img__link\" href=\"#\">\n                            <img class=\"img\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"\" width=\"395\">\n                        </a>\n                    </div>\n                    <div class=\"data__content\">\n                        <h2 class=\"title\">${title}</h2>\n                        <p class=\"text\">${currentGenres.join(', ')} | ${release_date ? release_date.slice(0, 4) : 2022} ${vote_average.toFixed(1)}</p>\n                    </div>\n                </li>`;\n    document.querySelector('.movies-modal').insertAdjacentHTML('beforeend', data);\n};\n\nfunction genresGen(genre_ids) {\n    const currentGenres = [];\n    JSON.parse(localStorage.getItem(`genresList`))\n        .forEach(elem => {\n            if (genre_ids.includes(elem.id) && currentGenres.length < 3) {\n                if (currentGenres.length < 2) {\n                    currentGenres.push(elem.name);\n                } else {\n                    currentGenres.push('Other');\n                };\n            };\n        });\n    return currentGenres;\n};\n\nfunction testTile(title) {\n    if (title.length > 40) {\n        title = title.split(' ')\n        let acc = '';\n        title.forEach(elem => {\n            if ((acc + elem).length <= 40 && !acc.endsWith('...')) {\n                acc = acc + ` ${elem}`;\n            } else if (!acc.endsWith('...')) {\n                acc = acc + '...'\n            };\n        });\n        title = acc;\n    };\n    return title;\n};\n\nfunction testPath(poster_path) {\n    if (!poster_path) {\n        poster_path = imgHolder;\n    } else {\n        poster_path = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n    };\n    return poster_path;\n};","module.exports = require('./helpers/bundle-url').getBundleURL('1B9dp') + require('./helpers/bundle-manifest').resolve(\"iXtly\");","const btn = document.querySelector('.btn-theme');\nconst body = document.querySelector('body');\nconst iconLight = document.querySelector('.theme-light');\nconst iconDark = document.querySelector('.theme-night');\n\n\nbtn.addEventListener('click', onClickChangeTheme);\n\nif (localStorage.getItem('theme') === 'dark-theme') {\n  body.classList.add('dark-theme');\n}\n\nif (localStorage.getItem('theme') === 'light-theme') {\n  body.classList.add('light-theme');\n}\n\nfunction onClickChangeTheme(ev) {\n  ev.preventDefault();\n\n  if (body.classList.contains('dark-theme')) {\n    body.classList.remove('dark-theme');\n\n    body.classList.add('light-theme');\n    localStorage.setItem('theme', 'light-theme');\n  } else {\n    body.classList.remove('light-theme');\n\n    body.classList.add('dark-theme');\n    localStorage.setItem('theme', 'dark-theme');\n  }\n}\n","(() => {\n    const openModalBtn = document.querySelector('[data-modal-open]');\n    const closeModalBtn = document.querySelector('.team-modal__button');\n    const modal = document.querySelector('.modal-overlay');\n    const body = document.querySelector('body');\n  \n    openModalBtn.addEventListener('click', openModal);\n  \n    function openModal() {\n      modal.classList.remove('is-hidden');\n      window.addEventListener('keydown', onPressEscape);\n      closeModalBtn.addEventListener('click', closeModal);\n      modal.addEventListener('click', backdropCloseModal);\n      body.classList.add('scroll-hidden');\n    }\n    function closeModal() {\n      body.classList.remove('scroll-hidden');\n      closeModalBtn.removeEventListener('click', closeModal);\n      modal.classList.add('is-hidden');\n      modal.removeEventListener('click', closeModal);\n      window.removeEventListener('keydown', onPressEscape);\n    }\n    function onPressEscape(event) {\n      if (event.code === 'Escape') {\n        closeModal();\n      }\n    }\n    function backdropCloseModal(event) {\n      if (event.currentTarget === event.target) {\n        closeModal();\n      }\n    }\n  })();","import { watchedMovies, queueMovies } from './js/user-storage.js';\nimport { requesterApi, requesterApiByID, requesterApiGenres } from './js/requester-api.js';\n\nimport { renderHomeCards, renderLibraryCards, renderModal, renderWatchedOrQueue } from './js/render.js';\n\nconst btns = document.querySelectorAll('.header-library__btn')\nconst list = document.querySelector('.list')\nconst imgHolder = document.querySelector('.wrapper-holder')\n\nimport { btn } from './js/theme-lite-dark.js'\n\n\nrequesterApiGenres()\n\nbtns.forEach((elem) => {\n    elem.addEventListener('click', (event) => {\n        if (!elem.classList.contains('header-library__btn--active')) {\n            btns.forEach((elem) => {\n                elem.classList.toggle('header-library__btn--active')\n            });\n        };\n        imgHolder.classList.add('is-hidden');\n        if (event.target.textContent === 'Watched') {\n            list.innerHTML = '';\n            const wMovies = JSON.parse(localStorage.getItem(`watchedMoviesIDs`));\n            if (wMovies) {\n                wMovies.forEach(elem => {\n                    requesterApiByID(elem)\n                        .then(data => {\n                            renderWatchedOrQueue(data);\n                        });\n                });\n            } else {\n                imgHolder.classList.remove('is-hidden');\n            };\n        } else if (event.target.textContent === 'Queue') {\n            list.innerHTML = '';\n            const qMoviesIDs = JSON.parse(localStorage.getItem(`queueMoviesIDs`));\n            imgHolder.classList.add('is-hidden');\n            if (qMoviesIDs) {\n                qMoviesIDs.forEach(elem => {\n                    requesterApiByID(elem)\n                        .then(data => {\n                            renderWatchedOrQueue(data);\n                        });\n                });\n            } else {\n                imgHolder.classList.remove('is-hidden');\n            };\n        };\n    });\n})\n\nlist.innerHTML = '';\nconst wMovies = JSON.parse(localStorage.getItem(`watchedMoviesIDs`));\nimgHolder.classList.add('is-hidden');\nif (wMovies) {\n    wMovies.forEach(elem => {\n        requesterApiByID(elem)\n            .then(data => {\n                renderWatchedOrQueue(data);\n            });\n    });\n} else {\n    imgHolder.classList.remove('is-hidden');\n};\n\n// requesterApi()\n//     .then(data => {\n//         renderLibraryCards(data.results)\n//     })\n\n\n// requesterApiByID(361743)\n//     .then(data => {\n//         renderModal(data)\n//     })\n\n// watchedMovies('put', 755566)\n\nimport './js/team-modal';"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","document","querySelector","$0381681f42d83abb$var$API_KEY","$0381681f42d83abb$export$39b2cf9496544130","fetch","concat","then","response","ok","status","json","catch","error","console","log","$fc4e315082f29d74$export$1473c4fb1f0606e7","param","genres","poster_path","title","release_date","vote_average","currentGenres","localStorage","getItem","forEach","ganre","elem","push","name","data","join","slice","toFixed","insertAdjacentHTML","getBundleURL","resolve","$40a3ca8185e7f1fa$var$btn","$40a3ca8185e7f1fa$var$body","addEventListener","ev","preventDefault","classList","contains","remove","add","setItem","openModalBtn","closeModalBtn","modal","body","closeModal","removeEventListener","window","onPressEscape","event","code","backdropCloseModal","currentTarget","target","$865c390aa2d1ad34$var$btns","querySelectorAll","$865c390aa2d1ad34$var$list","$865c390aa2d1ad34$var$imgHolder","stringify","elem1","toggle","textContent","innerHTML","wMovies1","qMoviesIDs","$865c390aa2d1ad34$var$wMovies"],"version":3,"file":"my-library.e12643ef.js.map"}